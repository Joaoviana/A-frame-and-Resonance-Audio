<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>MP - Music Computing</title>


    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><!-- /.src -->
    

    <script src="./src/scripts/resonance-audio.min.js"></script>
    <!-- A-Frame Framework import -->
    <script src="https://aframe.io/releases/0.9.0/aframe.min.js"></script>
    
    <!-- Resonance Audio SDK import -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/resonance-audio/build/resonance-audio.min.js"></script> -->
    <!-- A-Frame Component packages -->
    <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
    <!-- A-Frame Layout Component  -->
    <script src="https://unpkg.com/aframe-layout-component@4.3.1/dist/aframe-layout-component.min.js"></script>
    <!-- A-Frame Super Hands Component -->
    <script src="https://unpkg.com/super-hands@2.1.0/dist/super-hands.min.js"></script>
    <!-- A-Frame Physics system for A-Frame VR -->
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.3.0/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-template-component@^3.1.1/dist/aframe-template-component.min.js"></script> 

    <!-- JavaScript Files Import -->
    
    <!-- Room Model Config with Resonance Audio -->

        <script src="./src/scripts/room-models.js" type="text/javascript"></script>
        <script src="./src/scripts/components.js" type="text/javascript"></script>  
        <script src="./src/scripts/spatialisation.js" type="text/javascript"></script>
        
        
        <!-- <script src="./assets-and-scripts/canvas-control.js"></script>        -->
</head>
<body>
    <a-scene id="scene" vr-mode-ui="enabled: true" physics="gravity:0">
        <!-- Asset Management START -->
        <a-assets>
            <!-- Images pre-loading -->
            <img id="marble" src="./src/assets/marble.jpg" crossorigin="anonymous">
            <img id="foam" src="./src/assets/foam.jpg" crossorigin="anonymous">
            <img id="glass" src="./src/assets/glass.jpeg" crossorigin="anonymous">
            <img id="curtains" src="./src/assets/curtains.jpg" crossorigin="anonymous">
            <img id="wood" src="./src/assets/wood.jpg" crossorigin="anonymous">
            <img id="transparent" src="./src/assets/transparent.jpeg" crossorigin="anonymous">
            <img id="skyTexture" src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/sechelt.jpg">

            <!-- Mixins pre-loading -->
            <a-mixin id="mycursor" position="0 0 -0.5" raycaster geometry="primitive: ring; radiusOuter: 0.008; radiusInner: 0.005; segmentsTheta: 32" material="color: white; shader: flat" static-body="shape: sphere; sphereRadius: 0.001" super-hands="colliderEvent: raycaster-intersection;colliderEventProperty: els;colliderEndEvent:raycaster-intersection-cleared; colliderEndEventProperty: clearedEls;colliderState:"></a-mixin>
            <a-mixin id="mytouch" physics-collider phase-shift collision-filter="collisionForces: false" static-body="shape: sphere; sphereRadius: 0.02" super-hands="colliderEvent: collisions; colliderEventProperty: els; colliderEndEvent: collisions; colliderEndEventProperty: clearedEls;colliderState:"></a-mixin>
            <a-mixin id="cube" dynamic-body="angularDamping:.5;linearDamping:.15" hoverable grabbable stretchable draggable shadow="receive:true;castShadow:true"></a-mixin>
            <a-mixin id="menu" dynamic-body hoverable grabbable stretchable draggable ></a-mixin>
            <a-mixin id="wall" static-body geometry="primitive: plane; height: 10; width: 20;" material="wireframe: true;shader: flat;color: #42b9f4"></a-mixin>
            <a-mixin id="ground" shadow="receive:false;cast:false;" material="wireframe: true;shader:flat;color:#42b9f4" static-body geometry="primitive: plane; height: 20; width: 20" ></a-mixin>


        </a-assets>
        <!-- Asset Management END -->

        <!-- A-Scene START -->
        <a-box position="0 .05 0" static-body width=100 height=0.001 depth=100 visible="false"></a-box>
        <a-entity environment="preset:contact"></a-entity>
        <!-- <a-entity position="0 -.001 0" shadow="receive:true" environment="preset: default; lightPosition: 0 1 -0.4;playArea:1.25; groundYScale: 50;groundTexture:none"></a-entity>  -->
            <!-- <a-sphere id="sound-obj" x class="cube" mixin="cube" position="-0d 1.6 -3.25" radius=".75"material="color:#f44336">
                <a-animation attribute="color"
                dur="280"
                from="#f44336"
                to="green"
                begin="click"
                direction="alternate"
                repeat="0"></a-animation>
            </a-sphere> -->

        <!-- <a-sphere id="sphere2" y class="cube" mixin="cube" position="-0d 5 -3.25" radius=".75"material="color:#f44336" visible="false">
            <a-animation attribute="color"
            dur="280"
            from="#f44336"
            to="green"
            begin="click"
            direction="alternate"
            repeat="0"></a-animation>
        </a-sphere> --> 
    
        <!-- <a-text id="text1" class="text" material="shader:flat;" width="2.5" position="-.45 3 -3.25" rotation="20 0 "  value="Click to Play/Pause" text="">    
        </a-text> 
        <a-text id="text2" material="shader:flat" width="2.5" rotation="20 0 0" position="-.48 2.75 -3.25" value="Click & Hold to Move" text=""></a-text> -->
     
        <a-entity progressive-controls="gazeMixin: mycursor; touchMixin: mytouch; override: true; objects: .cube, .menu ; maxLevel: point;">
            <a-camera>
                <a-entity listener class="gazecaster"></a-entity>
            </a-camera>
            <a-entity  class="right-controller"></a-entity>
            <a-entity  class="left-controller"></a-entity>
        </a-entity>
    
        <a-entity rotation="-90 0 0" position="0 16.3054254257165 0" light="type:spot;intensity:1;castShadow:true"></a-entity>
        <a-entity mixin="wall" position="0 5 -10"></a-entity>
    
        <a-entity wireframe="true"  mixin="wall" rotation="0 180 0" position="0 5 10"></a-entity>
        <a-entity wireframe="true" mixin="wall" rotation="0 90 0" position="-10 5 0"></a-entity>
        <a-entity mixin="wall" rotation="0 -90 0" position="10 5 0"></a-entity>

        <a-entity mixin="ground" rotation="90 0 0" position="0 10 0"></a-entity>
       <!-- A-Scene END -->


        <!-- <a-box startbutton id="boxId" position="0 0.5 -3" rotation="0 45 0" color="blue"></a-box> -->

        <!-- Main Menu -->
        <a-entity id="main-menu" template="src: mainMenu.template"></a-entity>

        <!-- Wall Material Selection Menus START--> 
        <a-entity id="room-props-menu" template="src: roomPropsMenu.template" visible="false"></a-entity>
         <!-- Wall Material Selection Menus START-->
    </a-scene>
    
</body>
</html>